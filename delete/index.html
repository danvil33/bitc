<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitC Network - Data Deletion Request</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBEjeRSyKbpEmbNk0SYLUFPp3lbgP9x3Ow",
            authDomain: "volcanobxpl.firebaseapp.com",
            projectId: "volcanobxpl",
            storageBucket: "volcanobxpl.firebasestorage.app",
            messagingSenderId: "742861205377",
            appId: "1:742861205377:web:bbe8a42b78c90354a64280",
            measurementId: "G-G1KWGHLZES"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.db = db;
        window.addDoc = addDoc;
        window.collection = collection;
        window.serverTimestamp = serverTimestamp;
    </script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --primary: #f0b90b;
            --primary-hover: #d4a017;
            --secondary: #333333;
            --tertiary: #666666;
            --light: #f8fafc;
            --card: #ffffff;
            --border: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --radius: 16px;
            --radius-sm: 10px;
            --danger: #dc3545;
            --danger-hover: #c82333;
            --success: #28a745;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #1a1a2e;
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 20px;
        }

        h1 {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            color: #aaa;
            margin-bottom: 30px;
        }

        .card {
            background: #21213e;
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid #3a3a5a;
        }

        h2 {
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            font-size: 20px;
            color: #ffffff;
            margin: 25px 0 15px;
        }

        p {
            margin-bottom: 15px;
            color: #ddd;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 20px;
            color: #ddd;
        }

        li {
            margin-bottom: 10px;
        }

        .warning-box {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: var(--danger);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-box {
            background: rgba(240, 185, 11, 0.1);
            border: 1px solid rgba(240, 185, 11, 0.3);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin: 20px 0;
        }

        .info-box h4 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ffffff;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border-radius: var(--radius-sm);
            border: 1px solid #3a3a5a;
            background: #2a2a4a;
            color: white;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input {
            width: auto;
            margin-top: 5px;
        }

        .checkbox-group label {
            margin-bottom: 0;
        }

        .btn {
            display: inline-block;
            background: var(--primary);
            color: #1a1a2e;
            padding: 14px 30px;
            border-radius: var(--radius-sm);
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 16px;
            width: 100%;
            text-align: center;
        }

        .btn:hover {
            background: var(--primary-hover);
        }

        .btn:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: var(--danger-hover);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .confirmation {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .confirmation i {
            font-size: 64px;
            color: var(--success);
            margin-bottom: 20px;
        }

        .confirmation h2 {
            color: var(--success);
        }

        .error-message {
            color: var(--danger);
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.3);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin: 15px 0;
            display: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading i {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #3a3a5a;
            color: #aaa;
            font-size: 14px;
        }

        .footer a {
            color: var(--primary);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .social-icon:hover {
            transform: translateY(-2px);
        }

        .instagram {
            background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        }

        .twitter {
            background: linear-gradient(135deg, #1da1f2, #1a91da);
        }

        .youtube {
            background: linear-gradient(135deg, #ff0000, #cc0000);
        }

        .telegram {
            background: linear-gradient(135deg, #0088cc, #34b7f1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .card {
                padding: 20px;
            }
            
            h2 {
                font-size: 22px;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 36px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .subtitle {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-coins"></i>
            </div>
            <h1>BitC Network - Data Deletion Request</h1>
            <p class="subtitle">Submit a request to delete your account and associated data</p>
        </div>

        <div id="loading" class="loading">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing your request...</p>
        </div>

        <div id="errorMessage" class="error-message">
            <i class="fas fa-exclamation-circle"></i>
            <span id="errorText">An error occurred while processing your request. Please try again.</span>
        </div>

        <div id="requestForm">
            <div class="card">
                <h2><i class="fas fa-info-circle"></i> About Data Deletion</h2>
                <p>At BitC Network, we take your privacy seriously. In compliance with Google Play's data safety policy and other privacy regulations, we provide this form to request deletion of your account and associated data.</p>
                
                <div class="info-box">
                    <h4><i class="fas fa-lightbulb"></i> What happens when you request deletion?</h4>
                    <ul>
                        <li>Your account will be permanently deleted</li>
                        <li>All personal data will be removed from our systems</li>
                        <li>Mining progress and earnings data will be erased</li>
                        <li>Wallet information and transaction history will be deleted</li>
                        <li>This action is irreversible and cannot be undone</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Important Notice</h4>
                    <p>Before submitting a deletion request, please note:</p>
                    <ul>
                        <li>Ensure you have withdrawn any remaining BITC balance from your wallet</li>
                        <li>Deletion is permanent and cannot be reversed</li>
                        <li>You will lose access to all your mining progress and rewards</li>
                        <li>If you change your mind, you'll need to create a new account</li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <h2><i class="fas fa-user-times"></i> Request Data Deletion</h2>
                <p>Please fill out the form below to submit your data deletion request. We will process your request within 30 days as required by Google Play policy.</p>
                
                <form id="deletionForm">
                    <div class="form-group">
                        <label for="email">Email Address Associated with Your Account *</label>
                        <input type="email" id="email" name="email" required placeholder="Enter your registered email">
                    </div>
                    
                    <div class="form-group">
                        <label for="userId">User ID (Optional)</label>
                        <input type="text" id="userId" name="userId" placeholder="If you know your user ID, enter it here">
                    </div>
                    
                    <div class="form-group">
                        <label for="reason">Reason for Deletion (Optional)</label>
                        <select id="reason" name="reason">
                            <option value="">Select a reason</option>
                            <option value="privacy">Privacy concerns</option>
                            <option value="not_using">No longer using the app</option>
                            <option value="technical">Technical issues</option>
                            <option value="data_concerns">Data collection concerns</option>
                            <option value="other">Other reason</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="comments">Additional Comments (Optional)</label>
                        <textarea id="comments" name="comments" placeholder="Any additional information you'd like to share..."></textarea>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="confirmDelete" name="confirmDelete" required>
                        <label for="confirmDelete">I understand that this action is permanent and cannot be undone. I confirm that I want to delete my BitC Network account and all associated data.</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="confirmWithdrawal" name="confirmWithdrawal" required>
                        <label for="confirmWithdrawal">I confirm that I have withdrawn any remaining BITC balance from my wallet, or I understand that any unwithdrawn balance will be permanently lost.</label>
                    </div>
                    
                    <button type="submit" class="btn btn-danger" id="submitBtn">
                        <i class="fas fa-trash-alt"></i> Submit Deletion Request
                    </button>
                </form>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-question-circle"></i> Frequently Asked Questions</h2>
                
                <h3>How long does the deletion process take?</h3>
                <p>We process deletion requests within 30 days as required by Google Play policy. You will receive a confirmation email once your data has been deleted.</p>
                
                <h3>What data is deleted?</h3>
                <p>We delete all personal data associated with your account including: email address, username, mining progress, wallet information, transaction history, and any other data you've provided.</p>
                
                <h3>Can I recover my account after deletion?</h3>
                <p>No, account deletion is permanent and irreversible. If you wish to use BitC Network again, you'll need to create a new account.</p>
                
                <h3>What happens to my referral links and bonuses?</h3>
                <p>All referral data, including your referral code and any bonuses earned, will be permanently deleted.</p>
                
                <h3>I have multiple accounts. Can I delete them all at once?</h3>
                <p>You need to submit a separate deletion request for each email address associated with your accounts.</p>
            </div>
        </div>
        
        <div id="confirmationMessage" class="confirmation">
            <i class="fas fa-check-circle"></i>
            <h2>Deletion Request Received</h2>
            <p>Thank you for submitting your data deletion request. We have received your request and will process it within 30 days.</p>
            <p>You will receive a confirmation email at <span id="userEmail" style="font-weight: bold;"></span> once your data has been deleted.</p>
            <p><strong>Request ID:</strong> <span id="requestId" style="font-family: monospace;"></span></p>
            <p>If you have any questions, please contact us at <a href="mailto:privacy@bitcnetwork.com">privacy@bitcnetwork.com</a>.</p>
            <br>
            <button class="btn" onclick="window.location.href='https://bitcnetwork.com'">
                <i class="fas fa-home"></i> Return to BitC Network
            </button>
        </div>
        
        <div class="footer">
            <p>© 2024 BitC Network. All rights reserved.</p>
            <p>Need help? Contact us at <a href="mailto:support@bitcnetwork.com">support@bitcnetwork.com</a></p>
            
            <div class="social-icons">
                <div class="social-icon instagram" onclick="window.open('https://instagram.com/bitcnetwork', '_blank')">
                    <i class="fab fa-instagram"></i>
                </div>
                
                <div class="social-icon twitter" onclick="window.open('https://twitter.com/bitcnetwork', '_blank')">
                    <i class="fab fa-x-twitter"></i>
                </div>
                
                <div class="social-icon youtube" onclick="window.open('https://youtube.com/@bitcnetwork', '_blank')">
                    <i class="fab fa-youtube"></i>
                </div>
                
                <div class="social-icon telegram" onclick="window.open('https://t.me/bitcnetwork', '_blank')">
                    <i class="fab fa-telegram"></i>
                </div>
            </div>
            
            <p style="margin-top: 20px;">
                <a href="https://bitcnetwork.com/privacy">Privacy Policy</a> | 
                <a href="https://bitcnetwork.com/terms">Terms of Service</a>
            </p>
        </div>
    </div>

    <script>
        // Wait for Firebase to be loaded
        document.addEventListener('DOMContentLoaded', function() {
            const deletionForm = document.getElementById('deletionForm');
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            const requestForm = document.getElementById('requestForm');
            const confirmationMessage = document.getElementById('confirmationMessage');

            deletionForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Validate form
                if (!validateForm()) {
                    return;
                }

                // Get form values
                const email = document.getElementById('email').value;
                const userId = document.getElementById('userId').value;
                const reason = document.getElementById('reason').value;
                const comments = document.getElementById('comments').value;

                // Show loading state
                showLoading();
                
                try {
                    // Save deletion request to Firebase
                    const requestData = {
                        email: email,
                        userId: userId || null,
                        reason: reason || 'Not specified',
                        comments: comments || 'No additional comments',
                        status: 'pending',
                        ipAddress: await getIPAddress(),
                        userAgent: navigator.userAgent,
                        timestamp: serverTimestamp(),
                        processed: false
                    };

                    const docRef = await addDoc(collection(db, "deletionRequests"), requestData);
                    
                    // Show success message
                    showConfirmation(email, docRef.id);
                    
                    console.log('Deletion request saved with ID:', docRef.id);
                    
                } catch (error) {
                    console.error('Error saving deletion request:', error);
                    showError('Failed to submit your request. Please try again or contact support.');
                }
            });

            function validateForm() {
                const email = document.getElementById('email').value;
                const confirmDelete = document.getElementById('confirmDelete').checked;
                const confirmWithdrawal = document.getElementById('confirmWithdrawal').checked;
                
                // Basic email validation
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    showError('Please enter a valid email address.');
                    return false;
                }
                
                if (!confirmDelete || !confirmWithdrawal) {
                    showError('Please confirm both checkboxes before submitting.');
                    return false;
                }
                
                return true;
            }

            function showLoading() {
                requestForm.style.display = 'none';
                errorMessage.style.display = 'none';
                loading.style.display = 'block';
                submitBtn.disabled = true;
            }

            function showConfirmation(email, requestId) {
                loading.style.display = 'none';
                confirmationMessage.style.display = 'block';
                document.getElementById('userEmail').textContent = email;
                document.getElementById('requestId').textContent = requestId;
                
                // Scroll to top
                window.scrollTo(0, 0);
            }

            function showError(message) {
                loading.style.display = 'none';
                requestForm.style.display = 'block';
                errorMessage.style.display = 'block';
                document.getElementById('errorText').textContent = message;
                submitBtn.disabled = false;
                
                // Scroll to error
                errorMessage.scrollIntoView({ behavior: 'smooth' });
            }

            // Get user's IP address for logging
            async function getIPAddress() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    console.error('Error getting IP address:', error);
                    return 'unknown';
                }
            }

            // Email validation on blur
            document.getElementById('email').addEventListener('blur', function() {
                const email = this.value;
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (email && !emailRegex.test(email)) {
                    this.style.borderColor = 'var(--danger)';
                } else {
                    this.style.borderColor = '#3a3a5a';
                }
            });
        });

        // Firebase initialization check
        function checkFirebase() {
            if (!window.db) {
                console.error('Firebase not initialized');
                document.getElementById('errorText').textContent = 'Service temporarily unavailable. Please try again later.';
                document.getElementById('errorMessage').style.display = 'block';
                document.getElementById('submitBtn').disabled = true;
            }
        }

        // Check Firebase after a short delay
        setTimeout(checkFirebase, 2000);
    </script>
</body>
</html>
