<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BitC Network | Earn BITC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-analytics.js";
      import { 
          getAuth, 
          onAuthStateChanged, 
          signOut, 
          deleteUser,
          reauthenticateWithCredential,
          EmailAuthProvider 
      } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
      import { 
          getFirestore, 
          doc, 
          setDoc, 
          getDoc, 
          updateDoc, 
          deleteDoc,
          onSnapshot, 
          collection, 
          query, 
          where, 
          getDocs, 
          limit 
      } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-firestore.js";

      const firebaseConfig = {
          apiKey: "AIzaSyBEjeRSyKbpEmbNk0SYLUFPp3lbgP9x3Ow",
          authDomain: "volcanobxpl.firebaseapp.com",
          projectId: "volcanobxpl",
          storageBucket: "volcanobxpl.firebasestorage.app",
          messagingSenderId: "742861205377",
          appId: "1:742861205377:web:bbe8a42b78c90354a64280",
          measurementId: "G-G1KWGHLZES"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth(app);
      const db = getFirestore(app);
      
      window.auth = auth;
      window.db = db;
      window.onAuthStateChanged = onAuthStateChanged;
      window.signOut = signOut;
      window.deleteUser = deleteUser;
      window.reauthenticateWithCredential = reauthenticateWithCredential;
      window.EmailAuthProvider = EmailAuthProvider;
      window.getDoc = getDoc;
      window.setDoc = setDoc;
      window.doc = doc;
      window.updateDoc = updateDoc;
      window.deleteDoc = deleteDoc;
      window.onSnapshot = onSnapshot;
      window.collection = collection;
      window.query = query;
      window.where = where;
      window.getDocs = getDocs;
      window.limit = limit;
  </script>
  
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --primary: #f0b90b;
      --primary-hover: #d4a017;
      --bg-dark: #0f0f1a;
      --bg-card: #1a1a2e;
      --bg-card-light: #21213e;
      --bg-sidebar: #16213e;
      --text-primary: #ffffff;
      --text-secondary: #b8b8b8;
      --text-muted: #7a7a9a;
      --border-color: #2a2a4a;
      --danger: #dc3545;
      --success: #10b981;
    }

    body {
      font-family: 'Space Grotesk', 'Inter', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      padding-bottom: 80px;
      overflow-x: hidden;
    }

    /* Header */
    header {
      background: var(--bg-card);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid var(--border-color);
    }

    .menu {
      font-size: 22px;
      cursor: pointer;
      color: var(--primary);
      padding: 8px;
      background: rgba(240, 185, 11, 0.1);
      border-radius: 12px;
      width: 42px;
      height: 42px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .balance {
      font-size: 15px;
      font-weight: 500;
      background: rgba(255,255,255,0.05);
      padding: 8px 16px;
      border-radius: 100px;
      border: 1px solid var(--border-color);
    }

    .balance strong {
      font-size: 22px;
      color: var(--primary);
      font-family: 'Space Grotesk', monospace;
      margin-right: 4px;
    }

    .user-menu {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      cursor: pointer;
      position: relative;
      background: linear-gradient(135deg, var(--primary), var(--primary-hover));
      padding: 6px 12px 6px 6px;
      border-radius: 100px;
      color: var(--bg-dark);
      font-weight: 600;
    }

    .user-menu i {
      background: rgba(0,0,0,0.2);
      padding: 8px;
      border-radius: 50%;
      font-size: 14px;
    }

    .user-options {
      display: none;
      position: absolute;
      top: 50px;
      right: 0;
      background: var(--bg-card-light);
      border-radius: 16px;
      padding: 8px;
      z-index: 100;
      min-width: 180px;
      border: 1px solid var(--border-color);
      box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }

    .user-options div {
      padding: 12px 16px;
      cursor: pointer;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--text-primary);
    }

    .user-options div i {
      width: 20px;
      color: var(--primary);
    }

    .user-options div:hover {
      background: rgba(255,255,255,0.1);
    }

    .user-menu:hover .user-options {
      display: block;
    }

    /* Side Menu */
    .side-menu {
      position: fixed;
      top: 0;
      left: -300px;
      width: 280px;
      height: 100%;
      background: var(--bg-card);
      z-index: 2000;
      transition: left 0.3s ease;
      padding: 20px;
      box-shadow: 2px 0 20px rgba(0, 0, 0, 0.5);
      border-right: 1px solid var(--border-color);
    }

    .side-menu.active {
      left: 0;
    }

    .side-menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--border-color);
    }

    .side-menu-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .close-menu {
      font-size: 22px;
      cursor: pointer;
      color: var(--text-muted);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
    }

    .close-menu:hover {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .side-menu-item {
      padding: 14px 16px;
      margin-bottom: 8px;
      border-radius: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 15px;
      color: var(--text-secondary);
      transition: all 0.2s;
    }

    .side-menu-item:hover {
      background: var(--bg-card-light);
      color: var(--text-primary);
    }

    .side-menu-item i {
      font-size: 18px;
      width: 24px;
      color: var(--primary);
    }

    .side-menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1999;
      display: none;
    }

    .side-menu-overlay.active {
      display: block;
    }

    /* Main Section - Clean */
    .main {
      min-height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Sidebar Mining */
    .sidebar {
      position: fixed;
      right: 20px;
      top: 80px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 999;
    }

    .sidebar div {
      background: var(--bg-card-light);
      padding: 14px 8px;
      border-radius: 16px;
      text-align: center;
      font-size: 12px;
      width: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      border: 1px solid var(--border-color);
      backdrop-filter: blur(10px);
      font-weight: 500;
    }

    .sidebar div i {
      font-size: 22px;
      margin-bottom: 6px;
      color: var(--primary);
    }

    .sidebar .mining-counter {
      font-size: 11px;
      margin-top: 6px;
      color: var(--primary);
      font-family: monospace;
      background: rgba(240,185,11,0.1);
      padding: 4px 6px;
      border-radius: 20px;
      width: 100%;
    }

    .sidebar div.mining-active {
      background: var(--bg-card);
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(240, 185, 11, 0.2);
    }

    /* BitC Info - Clean minimal */
    .bitc-mining {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
    }

    .bitc-mining h3 {
      font-size: 28px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 20px;
      letter-spacing: -0.5px;
    }

    .highlight {
      background: var(--bg-card);
      padding: 24px;
      border-radius: 24px;
      border: 1px solid var(--border-color);
      line-height: 1.6;
      color: var(--text-secondary);
      font-size: 15px;
    }

    .highlight strong {
      color: var(--primary);
      display: block;
      margin-bottom: 10px;
      font-size: 18px;
    }

    /* Wallet Section - Redesigned */
    .wallet-section {
      background: var(--bg-dark);
      color: var(--text-primary);
      width: 100%;
      min-height: calc(100vh - 80px);
      padding: 24px 20px;
      display: none;
    }

    .wallet-header {
      margin-bottom: 24px;
    }

    .wallet-header h2 {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #fff, var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .wallet-header p {
      color: var(--text-muted);
      font-size: 14px;
    }

    .wallet-card {
      background: var(--bg-card);
      border-radius: 30px;
      padding: 24px;
      border: 1px solid var(--border-color);
      max-width: 450px;
      margin: 0 auto 24px;
    }

    .wallet-balance-label {
      color: var(--text-muted);
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .wallet-balance-amount {
      font-size: 42px;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Space Grotesk', monospace;
      margin-bottom: 20px;
      line-height: 1;
    }

    .wallet-balance-amount span {
      font-size: 18px;
      color: var(--text-muted);
      font-weight: 400;
      margin-left: 8px;
    }

    .wallet-address-container {
      background: rgba(255,255,255,0.03);
      border-radius: 20px;
      padding: 16px;
      margin-bottom: 24px;
      border: 1px solid var(--border-color);
    }

    .wallet-address-label {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-muted);
      font-size: 13px;
      margin-bottom: 12px;
    }

    .wallet-address-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .wallet-address {
      font-family: 'Space Grotesk', monospace;
      font-size: 16px;
      color: var(--text-primary);
      letter-spacing: 0.5px;
    }

    .copy-btn {
      background: rgba(240,185,11,0.1);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--primary);
    }

    .wallet-actions {
      display: flex;
      gap: 12px;
    }

    .wallet-action-btn {
      flex: 1;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border-color);
      padding: 16px;
      border-radius: 20px;
      color: var(--text-primary);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .wallet-action-btn i {
      color: var(--primary);
      font-size: 18px;
    }

    .wallet-action-btn:hover {
      background: rgba(240,185,11,0.1);
      border-color: var(--primary);
    }

    .tokens-section {
      max-width: 450px;
      margin: 0 auto;
    }

    .tokens-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .tokens-header h3 {
      font-size: 18px;
      font-weight: 600;
    }

    .token-card {
      background: var(--bg-card);
      border-radius: 20px;
      padding: 20px;
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: all 0.2s;
    }

    .token-card:hover {
      border-color: var(--primary);
      background: var(--bg-card-light);
    }

    .token-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .token-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--primary), var(--primary-hover));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .token-details h4 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .token-details p {
      color: var(--text-muted);
      font-size: 13px;
    }

    .token-balance {
      text-align: right;
    }

    .token-balance .value {
      font-size: 20px;
      font-weight: 700;
      font-family: 'Space Grotesk', monospace;
      margin-bottom: 4px;
    }

    .token-balance .usd {
      color: var(--text-muted);
      font-size: 13px;
    }

    /* Profile Section - Redesigned */
    .profile-section {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
      display: none;
    }

    .profile-header-large {
      background: var(--bg-card);
      border-radius: 30px;
      padding: 30px;
      border: 1px solid var(--border-color);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .profile-avatar-large {
      width: 90px;
      height: 90px;
      background: linear-gradient(135deg, var(--primary), var(--primary-hover));
      border-radius: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: var(--bg-dark);
      font-weight: 600;
    }

    .profile-info-large h2 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 6px;
      letter-spacing: -0.5px;
    }

    .profile-info-large .username-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(240,185,11,0.1);
      padding: 6px 12px;
      border-radius: 30px;
      color: var(--primary);
      font-size: 14px;
      font-weight: 500;
    }

    .stats-grid {
      background: var(--bg-card);
      border-radius: 30px;
      padding: 30px;
      border: 1px solid var(--border-color);
      margin-bottom: 20px;
    }

    .stats-grid h3 {
      font-size: 20px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--primary);
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      border-bottom: 1px solid var(--border-color);
    }

    .stat-row:last-child {
      border-bottom: none;
    }

    .stat-label {
      color: var(--text-muted);
      font-size: 15px;
    }

    .stat-value-large {
      font-size: 22px;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Space Grotesk', monospace;
    }

    .balance-showcase {
      background: linear-gradient(135deg, rgba(240,185,11,0.1), rgba(240,185,11,0.05));
      border-radius: 24px;
      padding: 24px;
      margin-top: 24px;
      text-align: center;
      border: 1px solid rgba(240,185,11,0.2);
    }

    .balance-showcase .label {
      color: var(--text-muted);
      font-size: 14px;
      margin-bottom: 10px;
    }

    .balance-showcase .amount {
      font-size: 36px;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Space Grotesk', monospace;
    }

    /* Referral Section */
    .referral-section {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
      display: none;
    }

    .referral-card {
      background: var(--bg-card);
      border-radius: 30px;
      padding: 30px;
      border: 1px solid var(--border-color);
    }

    .referral-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      background: rgba(255,255,255,0.03);
      padding: 6px;
      border-radius: 16px;
    }

    .referral-tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }

    .referral-tab.active {
      background: var(--primary);
      color: var(--bg-dark);
    }

    .referral-code-box {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      margin: 20px 0;
    }

    .referral-code {
      font-size: 32px;
      font-weight: 700;
      color: var(--primary);
      font-family: 'Space Grotesk', monospace;
      letter-spacing: 2px;
      margin: 10px 0;
    }

    .copy-btn-large {
      background: var(--primary);
      color: var(--bg-dark);
      border: none;
      padding: 16px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    /* Footer */
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      display: flex;
      justify-content: space-around;
      padding: 12px 20px;
      border-top: 1px solid var(--border-color);
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .footer-item {
      color: var(--text-muted);
      font-size: 12px;
      text-align: center;
      cursor: pointer;
      padding: 8px 16px;
      border-radius: 30px;
      transition: all 0.2s;
      font-weight: 500;
    }

    .footer-item.active {
      color: var(--primary);
      background: rgba(240,185,11,0.1);
    }

    .footer-item i {
      display: block;
      font-size: 20px;
      margin-bottom: 4px;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-card-light);
      color: white;
      padding: 16px 24px;
      border-radius: 20px;
      z-index: 2000;
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(120%);
      transition: transform 0.3s ease;
      border: 1px solid var(--border-color);
      backdrop-filter: blur(10px);
      font-weight: 500;
    }

    .notification.show {
      transform: translateX(0);
    }

    .notification i {
      color: var(--primary);
      font-size: 20px;
    }

    .hidden {
      display: none !important;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 3000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      background: var(--bg-card);
      padding: 30px;
      max-width: 450px;
      width: 90%;
      border-radius: 30px;
      border: 1px solid var(--border-color);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h3 {
      color: var(--danger);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .modal-input {
      width: 100%;
      padding: 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      color: white;
      margin: 20px 0;
      font-size: 16px;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
    }

    .modal-btn {
      flex: 1;
      padding: 16px;
      border: none;
      border-radius: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .modal-btn.cancel {
      background: rgba(255,255,255,0.1);
      color: white;
    }

    .modal-btn.confirm {
      background: var(--danger);
      color: white;
    }
  </style>
</head>
<body>
  <!-- Delete Account Modal -->
  <div class="modal" id="deleteAccountModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-exclamation-triangle"></i> Delete Account</h3>
        <button class="close-menu" onclick="closeDeleteAccountModal()"><i class="fas fa-times"></i></button>
      </div>
      <div style="color: var(--text-secondary);">
        <p><strong>Warning:</strong> This action is permanent!</p>
        <p>All your data will be permanently deleted.</p>
        <input type="password" id="deletePassword" class="modal-input" placeholder="Enter your password">
      </div>
      <div class="modal-actions">
        <button class="modal-btn cancel" onclick="closeDeleteAccountModal()">Cancel</button>
        <button class="modal-btn confirm" onclick="confirmDeleteAccount()">Delete Account</button>
      </div>
    </div>
  </div>

  <!-- Side Menu -->
  <div class="side-menu" id="side-menu">
    <div class="side-menu-header">
      <div class="side-menu-title">
        <i class="fas fa-coins"></i> BitC Network
      </div>
      <div class="close-menu" onclick="closeSideMenu()"><i class="fas fa-times"></i></div>
    </div>
    <div class="side-menu-item" onclick="navigate('home')"><i class="fas fa-home"></i><span>Home</span></div>
    <div class="side-menu-item" onclick="navigate('wallet')"><i class="fas fa-wallet"></i><span>Wallet</span></div>
    <div class="side-menu-item" onclick="navigate('profile')"><i class="fas fa-user"></i><span>Profile</span></div>
    <div class="side-menu-item" onclick="navigate('referral')"><i class="fas fa-share"></i><span>Referrals</span></div>
    <div class="side-menu-item" onclick="openWhitepaper()"><i class="fas fa-file-alt"></i><span>Whitepaper</span></div>
    <div class="side-menu-item" onclick="openLegal()"><i class="fas fa-gavel"></i><span>Legal</span></div>
    <div class="side-menu-item" onclick="openDeleteAccountModal()"><i class="fas fa-trash-alt"></i><span>Delete Account</span></div>
    <div class="side-menu-item" onclick="logout()"><i class="fas fa-sign-out-alt"></i><span>Logout</span></div>
  </div>
  
  <div class="side-menu-overlay" id="side-menu-overlay" onclick="closeSideMenu()"></div>

  <header>
    <div class="menu" onclick="toggleSideMenu()"><i class="fas fa-bars"></i></div>
    <div class="balance"><strong id="bitc-balance">0.000</strong> BITC</div>
    <div class="user-menu" id="user-menu">
      <i class="fas fa-user"></i> <span id="current-user">User</span>
      <div class="user-options">
        <div onclick="navigate('profile')"><i class="fas fa-user"></i> Profile</div>
        <div onclick="navigate('referral')"><i class="fas fa-share"></i> Referrals</div>
        <div onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</div>
      </div>
    </div>
  </header>

  <div class="main" id="main-content"></div>

  <div class="sidebar" id="sidebar">
    <div onclick="navigate('referral')"><i class="fas fa-user-plus"></i><span>Join</span></div>
    <div id="mining-btn" onclick="startMining()">
      <i class="fas fa-bolt"></i>
      <span id="mining-rate-display">1/h</span>
      <span class="mining-counter" id="mining-counter">00:00:00</span>
    </div>
    <div onclick="navigate('referral')"><i class="fas fa-share"></i><span>Invite</span></div>
  </div>

  <div class="bitc-mining" id="bitc-content">
    <h3>BitC Network</h3>
    <div class="highlight">
      <strong>What is BitC?</strong>
      BitC (Blockchain & Internet Technology Coin) is a revolutionary mobile cryptocurrency mining platform. Mine BITC tokens efficiently and securely from any device.
    </div>
  </div>

  <!-- Wallet Section - Redesigned -->
  <div class="wallet-section" id="wallet-content">
    <div class="wallet-header">
      <h2>Your Wallet</h2>
      <p>Manage your BITC assets</p>
    </div>
    
    <div class="wallet-card">
      <div class="wallet-balance-label">Total Balance</div>
      <div class="wallet-balance-amount" id="wallet-balance">$0.00 <span>USD</span></div>
      
      <div class="wallet-address-container">
        <div class="wallet-address-label">
          <i class="fas fa-qrcode"></i> Your Wallet Address
        </div>
        <div class="wallet-address-row">
          <span class="wallet-address" id="wallet-address">Loading...</span>
          <button class="copy-btn" id="copyBtn"><i class="far fa-copy"></i></button>
        </div>
      </div>
      
      <div class="wallet-actions">
        <button class="wallet-action-btn" onclick="showNotification('Coming soon!', 'info')">
          <i class="fas fa-arrow-down"></i> Receive
        </button>
        <button class="wallet-action-btn" onclick="showNotification('Coming soon!', 'info')">
          <i class="fas fa-arrow-up"></i> Send
        </button>
      </div>
    </div>

    <div class="tokens-section">
      <div class="tokens-header">
        <h3>Your Assets</h3>
        <span style="color: var(--text-muted); font-size: 13px;">1 BITC = $0.12</span>
      </div>
      
      <div class="token-card" onclick="tokenClick()">
        <div class="token-info">
          <div class="token-icon">
            <i class="fas fa-coins" style="color: var(--bg-dark); font-size: 24px;"></i>
          </div>
          <div class="token-details">
            <h4>BITC</h4>
            <p>BitC Network</p>
          </div>
        </div>
        <div class="token-balance">
          <div class="value" id="bitc-token-balance">0.00</div>
          <div class="usd">$0.00</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Section - Redesigned with Username -->
  <div class="profile-section" id="profile-content">
    <div class="profile-header-large">
      <div class="profile-avatar-large">
        <span id="profile-initial">B</span>
      </div>
      <div class="profile-info-large">
        <h2 id="profile-username">BitC User</h2>
        <div class="username-badge">
          <i class="fas fa-user"></i> <span id="profile-username-tag">@bitcuser</span>
        </div>
      </div>
    </div>
    
    <div class="stats-grid">
      <h3><i class="fas fa-chart-line"></i> Mining Statistics</h3>
      
      <div class="stat-row">
        <span class="stat-label">Total Earned</span>
        <span class="stat-value-large" id="total-earned">0.00 BITC</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Mining Rewards</span>
        <span class="stat-value-large" id="mining-rewards">0.00 BITC</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Referral Bonuses</span>
        <span class="stat-value-large" id="referral-bonuses">0.00 BITC</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">Referrals</span>
        <span class="stat-value-large" id="referrals-count">0</span>
      </div>
      
      <div class="balance-showcase">
        <div class="label">Available Balance</div>
        <div class="amount" id="available-balance">0.00 BITC</div>
      </div>
    </div>
  </div>

  <!-- Referral Section -->
  <div class="referral-section" id="referral-content">
    <div class="referral-card">
      <h3 style="font-size: 24px; margin-bottom: 20px;"><i class="fas fa-share"></i> Referral Program</h3>
      
      <div class="referral-tabs">
        <div class="referral-tab active" id="invite-tab-btn" onclick="switchReferralTab('invite')">Invite</div>
        <div class="referral-tab" id="join-tab-btn" onclick="switchReferralTab('join')">Join</div>
      </div>
      
      <div id="invite-tab" class="referral-tab-content active">
        <p style="color: var(--text-secondary); margin-bottom: 15px;">Share your code and earn 1 BITC per referral!</p>
        <div class="referral-code-box">
          <div style="color: var(--text-muted); font-size: 12px; margin-bottom: 5px;">YOUR REFERRAL CODE</div>
          <div class="referral-code" id="referral-code-display">Loading...</div>
        </div>
        <button class="copy-btn-large" onclick="copyReferralCode()">
          <i class="fas fa-copy"></i> Copy Code
        </button>
        <div style="margin-top: 30px;">
          <div class="stat-row">
            <span>Total Referrals</span>
            <span class="stat-value-large" id="total-referrals">0</span>
          </div>
          <div class="stat-row">
            <span>Earned from Referrals</span>
            <span class="stat-value-large" id="earned-from-referrals">0 BITC</span>
          </div>
        </div>
      </div>
      
      <div id="join-tab" class="referral-tab-content">
        <p style="color: var(--text-secondary); margin-bottom: 20px;">Enter a referral code to earn 1 BITC</p>
        <input type="text" class="modal-input" id="referral-code-input" placeholder="Enter referral code" style="margin-bottom: 15px;">
        <button class="copy-btn-large" onclick="joinWithReferral()" style="background: var(--primary);">
          <i class="fas fa-user-plus"></i> Join with Code
        </button>
      </div>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <i class="fas fa-info-circle"></i>
    <span id="notification-message"></span>
  </div>

  <div class="footer">
    <div class="footer-item active" onclick="navigate('home')"><i class="fas fa-home"></i><span>Home</span></div>
    <div class="footer-item" onclick="navigate('wallet')"><i class="fas fa-wallet"></i><span>Wallet</span></div>
    <div class="footer-item" onclick="navigate('profile')"><i class="fas fa-user"></i><span>Profile</span></div>
  </div>

  <script>
    // Mining constants
    const BASE_MINING_RATE_BITC_PER_HOUR = 0.12;
    const MAX_MINING_HOURS = 24;
    const MAX_MINING_SECONDS = MAX_MINING_HOURS * 3600;
    const REFERRAL_REWARD = 1;
    const MINING_RATE_INCREMENT = 0.1;

    // Global variables
    let userData = {
      uid: null,
      username: 'BitC User',
      email: '',
      createdAt: new Date().toISOString(),
      minedBitc: 0,
      lastStartTime: null,
      walletBalance: 0,
      miningRewards: 0,
      referralBonuses: 0,
      referralsCount: 0,
      miningRateBitcPerHour: BASE_MINING_RATE_BITC_PER_HOUR,
      referralCode: null,
      usedReferralCode: null,
      walletAddress: null,
      isMining: false
    };
    
    let miningInterval = null;
    let userUnsubscribe = null;
    let miningSessionBitc = 0;

    // DOM Elements
    const bitcBalanceElement = document.getElementById('bitc-balance');
    const miningBtn = document.getElementById('mining-btn');
    const miningRateDisplay = document.getElementById('mining-rate-display');
    const miningCounter = document.getElementById('mining-counter');
    const walletBalanceElement = document.getElementById('wallet-balance');
    const bitcTokenBalanceElement = document.getElementById('bitc-token-balance');
    const walletAddressElement = document.getElementById('wallet-address');
    const totalEarnedElement = document.getElementById('total-earned');
    const miningRewardsElement = document.getElementById('mining-rewards');
    const referralBonusesElement = document.getElementById('referral-bonuses');
    const referralsCountElement = document.getElementById('referrals-count');
    const availableBalanceElement = document.getElementById('available-balance');
    const currentUserElement = document.getElementById('current-user');
    const profileUsername = document.getElementById('profile-username');
    const profileUsernameTag = document.getElementById('profile-username-tag');
    const profileInitial = document.getElementById('profile-initial');
    const referralCodeDisplay = document.getElementById('referral-code-display');
    const referralCodeInput = document.getElementById('referral-code-input');
    const totalReferralsElement = document.getElementById('total-referrals');
    const earnedFromReferralsElement = document.getElementById('earned-from-referrals');
    const notification = document.getElementById('notification');
    const notificationMessage = document.getElementById('notification-message');
    const sideMenu = document.getElementById('side-menu');
    const sideMenuOverlay = document.getElementById('side-menu-overlay');
    const deleteAccountModal = document.getElementById('deleteAccountModal');
    const deletePasswordInput = document.getElementById('deletePassword');
    const userMenu = document.getElementById('user-menu');

    // Generate BSC-style wallet address
    function generateWalletAddress() {
      const chars = '0123456789abcdef';
      let result = '0x';
      for (let i = 0; i < 40; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    // Show notification
    function showNotification(message, type = 'info', duration = 3000) {
      notificationMessage.textContent = message;
      notification.className = `notification show`;
      setTimeout(() => {
        notification.classList.remove('show');
      }, duration);
    }

    // Side Menu Functions
    function toggleSideMenu() {
      sideMenu.classList.toggle('active');
      sideMenuOverlay.classList.toggle('active');
    }

    function closeSideMenu() {
      sideMenu.classList.remove('active');
      sideMenuOverlay.classList.remove('active');
    }

    function openWhitepaper() {
      closeSideMenu();
      window.open('https://bitcnetwork.com/whitepaper/', '_blank');
    }

    function openLegal() {
      closeSideMenu();
      window.open('legal.html', '_blank');
    }

    // Account Deletion Functions
    function openDeleteAccountModal() {
      deleteAccountModal.style.display = 'flex';
      deletePasswordInput.value = '';
      closeSideMenu();
    }

    function closeDeleteAccountModal() {
      deleteAccountModal.style.display = 'none';
    }

    async function confirmDeleteAccount() {
      const password = deletePasswordInput.value.trim();
      if (!password) {
        showNotification('Please enter your password', 'error');
        return;
      }

      const user = auth.currentUser;
      if (!user) {
        showNotification('User not found', 'error');
        return;
      }

      try {
        const credential = EmailAuthProvider.credential(user.email, password);
        await reauthenticateWithCredential(user, credential);
        await deleteDoc(doc(db, "users", user.uid));
        await deleteUser(user);
        showNotification('Account deleted', 'success');
        setTimeout(() => { window.location.href = 'index.html'; }, 2000);
      } catch (error) {
        showNotification('Failed to delete account', 'error');
      }
    }

    // Initialize the app
    async function initApp() {
      onAuthStateChanged(auth, async (user) => {
        if (user) {
          userData.uid = user.uid;
          userData.email = user.email;
          await setupRealtimeListener();
        } else {
          window.location.href = 'index.html';
        }
      });
    }

    // Set up real-time listener
    function setupRealtimeListener() {
      try {
        const docRef = doc(db, "users", userData.uid);
        userUnsubscribe = onSnapshot(docRef, (docSnap) => {
          if (docSnap.exists()) {
            const data = docSnap.data();
            updateUserData(data);
            updateUI();
            if (userData.isMining && userData.lastStartTime) {
              resumeMining();
            }
          } else {
            createUserProfile();
          }
        });
      } catch (error) {
        showNotification('Connection issue', 'warning');
      }
    }

    function updateUserData(data) {
      userData.createdAt = data.createdAt || new Date().toISOString();
      userData.username = data.username || userData.username;
      userData.minedBitc = data.miningData?.minedBitc || 0;
      userData.lastStartTime = data.miningData?.lastStartTime || null;
      userData.walletBalance = data.miningData?.walletBalance || 0;
      userData.miningRewards = data.miningData?.miningRewards || 0;
      userData.referralBonuses = data.miningData?.referralBonuses || 0;
      userData.referralsCount = data.miningData?.referralsCount || 0;
      userData.miningRateBitcPerHour = data.miningData?.miningRateBitcPerHour || BASE_MINING_RATE_BITC_PER_HOUR;
      userData.referralCode = data.miningData?.referralCode || userData.username.toUpperCase().substring(0, 8);
      userData.usedReferralCode = data.miningData?.usedReferralCode || null;
      userData.isMining = data.miningData?.isMining || false;
      userData.walletAddress = data.miningData?.walletAddress || generateWalletAddress();
      
      // Update username displays
      currentUserElement.textContent = userData.username;
      profileUsername.textContent = userData.username;
      profileUsernameTag.textContent = '@' + userData.username.toLowerCase().replace(/\s+/g, '');
      profileInitial.textContent = userData.username.charAt(0).toUpperCase();
    }

    async function createUserProfile() {
      try {
        const username = userData.email.split('@')[0];
        const walletAddress = generateWalletAddress();
        const userProfile = {
          createdAt: new Date().toISOString(),
          email: userData.email,
          username: username,
          miningData: {
            minedBitc: 0,
            lastStartTime: null,
            walletBalance: 0,
            miningRewards: 0,
            referralBonuses: 0,
            referralsCount: 0,
            miningRateBitcPerHour: BASE_MINING_RATE_BITC_PER_HOUR,
            referralCode: username.toUpperCase().substring(0, 8),
            usedReferralCode: null,
            walletAddress: walletAddress,
            isMining: false
          }
        };
        await setDoc(doc(db, "users", userData.uid), userProfile);
        updateUserData(userProfile);
        updateUI();
      } catch (error) {
        showNotification('Failed to create profile', 'error');
      }
    }

    async function saveUserData() {
      try {
        await updateDoc(doc(db, "users", userData.uid), {
          "miningData.minedBitc": userData.minedBitc || 0,
          "miningData.lastStartTime": userData.lastStartTime || null,
          "miningData.walletBalance": userData.walletBalance || 0,
          "miningData.miningRewards": userData.miningRewards || 0,
          "miningData.referralBonuses": userData.referralBonuses || 0,
          "miningData.referralsCount": userData.referralsCount || 0,
          "miningData.miningRateBitcPerHour": userData.miningRateBitcPerHour,
          "miningData.isMining": userData.isMining
        });
      } catch (error) {
        console.error('Error saving user data:', error);
      }
    }

    function updateUI() {
      const totalBitc = (userData.minedBitc || 0) + miningSessionBitc;
      bitcBalanceElement.textContent = totalBitc.toFixed(3);
      miningRateDisplay.textContent = (userData.miningRateBitcPerHour || BASE_MINING_RATE_BITC_PER_HOUR).toFixed(2) + '/h';
      
      // Wallet updates
      const usdValue = (userData.walletBalance || 0) * 0.12;
      walletBalanceElement.textContent = '$' + usdValue.toFixed(2);
      bitcTokenBalanceElement.textContent = (userData.walletBalance || 0).toFixed(2);
      
      const address = userData.walletAddress || 'Loading...';
      walletAddressElement.textContent = address.length > 14 ? `${address.substring(0, 6)}...${address.substring(address.length - 4)}` : address;
      
      // Profile updates
      totalEarnedElement.textContent = ((userData.miningRewards || 0) + (userData.referralBonuses || 0) + miningSessionBitc).toFixed(2) + ' BITC';
      miningRewardsElement.textContent = ((userData.miningRewards || 0) + miningSessionBitc).toFixed(2) + ' BITC';
      referralBonusesElement.textContent = (userData.referralBonuses || 0).toFixed(2) + ' BITC';
      referralsCountElement.textContent = userData.referralsCount || 0;
      availableBalanceElement.textContent = (userData.walletBalance || 0).toFixed(2) + ' BITC';
      
      // Referral updates
      referralCodeDisplay.textContent = userData.referralCode || '----';
      totalReferralsElement.textContent = userData.referralsCount || 0;
      earnedFromReferralsElement.textContent = (userData.referralBonuses || 0).toFixed(2) + ' BITC';
    }

    function resumeMining() {
      if (!userData.isMining || !userData.lastStartTime) return;
      userData.isMining = true;
      miningBtn.classList.add('mining-active');
      miningInterval = setInterval(updateMining, 1000);
      updateMining();
    }

    async function startMining() {
      if (userData.isMining) {
        showNotification('Mining already in progress!', 'info');
        return;
      }

      userData.isMining = true;
      miningBtn.classList.add('mining-active');
      
      if (!userData.lastStartTime) {
        userData.lastStartTime = Date.now();
        try {
          await updateDoc(doc(db, "users", userData.uid), {
            "miningData.isMining": true,
            "miningData.lastStartTime": userData.lastStartTime
          });
        } catch (error) {
          console.error('Error saving mining start time:', error);
        }
      }
      
      miningInterval = setInterval(updateMining, 1000);
      showNotification('Mining started! 24 hour session.', 'success');
    }

    function updateMining() {
      const now = Date.now();
      const elapsedSeconds = Math.floor((now - userData.lastStartTime) / 1000);
      
      if (elapsedSeconds >= MAX_MINING_SECONDS) {
        const earned = userData.miningRateBitcPerHour * 24;
        userData.minedBitc += earned;
        userData.miningRewards += earned;
        stopMining();
        userData.isMining = false;
        userData.lastStartTime = null;
        miningSessionBitc = 0;
        saveUserData();
        showNotification(`Mining completed! Earned ${earned.toFixed(2)} BITC.`, 'success');
        return;
      }
      
      miningSessionBitc = (elapsedSeconds / 3600) * userData.miningRateBitcPerHour;
      
      const remainingSeconds = MAX_MINING_SECONDS - elapsedSeconds;
      const hours = Math.floor(remainingSeconds / 3600);
      const minutes = Math.floor((remainingSeconds % 3600) / 60);
      const seconds = remainingSeconds % 60;
      
      miningCounter.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      updateUI();
    }

    function stopMining() {
      userData.isMining = false;
      clearInterval(miningInterval);
      miningBtn.classList.remove('mining-active');
      miningCounter.textContent = '00:00:00';
    }

    function navigate(page) {
      closeSideMenu();
      document.querySelectorAll('.footer-item').forEach(item => item.classList.remove('active'));
      
      if (page === 'home') document.querySelector('.footer-item:nth-child(1)').classList.add('active');
      else if (page === 'wallet') document.querySelector('.footer-item:nth-child(2)').classList.add('active');
      else if (page === 'profile') document.querySelector('.footer-item:nth-child(3)').classList.add('active');

      document.getElementById('main-content').style.display = 'none';
      document.getElementById('bitc-content').style.display = 'none';
      document.getElementById('wallet-content').style.display = 'none';
      document.getElementById('profile-content').style.display = 'none';
      document.getElementById('referral-content').style.display = 'none';
      
      if (page === 'wallet') document.getElementById('sidebar').style.display = 'none';
      else document.getElementById('sidebar').style.display = 'flex';

      if (page === 'home') {
        document.getElementById('main-content').style.display = 'flex';
        document.getElementById('bitc-content').style.display = 'block';
      } else if (page === 'wallet') {
        document.getElementById('wallet-content').style.display = 'block';
      } else if (page === 'profile') {
        document.getElementById('profile-content').style.display = 'block';
      } else if (page === 'referral') {
        document.getElementById('referral-content').style.display = 'block';
      }
    }

    function switchReferralTab(tabName) {
      document.querySelectorAll('.referral-tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.referral-tab').forEach(tab => tab.classList.remove('active'));
      document.getElementById(`${tabName}-tab`).classList.add('active');
      if (tabName === 'invite') inviteTabBtn.classList.add('active');
      else if (tabName === 'join') joinTabBtn.classList.add('active');
    }

    function copyReferralCode() {
      if (userData.referralCode) {
        navigator.clipboard.writeText(userData.referralCode);
        showNotification('Referral code copied!', 'success');
      }
    }

    async function joinWithReferral() {
      const referralCode = referralCodeInput.value.trim().toUpperCase();
      if (!referralCode) {
        showNotification('Please enter a referral code', 'error');
        return;
      }
      
      if (referralCode === userData.referralCode) {
        showNotification('Cannot use your own code', 'error');
        return;
      }
      
      try {
        const querySnapshot = await getDocs(query(collection(db, "users"), where("miningData.referralCode", "==", referralCode), limit(1)));
        if (querySnapshot.empty) {
          showNotification('Invalid referral code', 'error');
          return;
        }
        
        userData.usedReferralCode = referralCode;
        userData.referralBonuses += REFERRAL_REWARD;
        userData.minedBitc += REFERRAL_REWARD;
        await saveUserData();
        showNotification(`Earned ${REFERRAL_REWARD} BITC!`, 'success');
        navigate('profile');
      } catch (error) {
        showNotification('Failed to process referral', 'error');
      }
    }

    function tokenClick() {
      showNotification(`BITC balance: ${(userData.walletBalance || 0).toFixed(3)} BITC`, 'info');
    }

    function logout() {
      if (userUnsubscribe) userUnsubscribe();
      if (miningInterval) clearInterval(miningInterval);
      signOut(auth).then(() => { window.location.href = 'index.html'; });
    }

    // Event Listeners
    window.addEventListener('load', initApp);

    document.addEventListener('click', (e) => {
      if (e.target.id === 'copyBtn' || e.target.closest('#copyBtn')) {
        const address = userData.walletAddress;
        navigator.clipboard.writeText(address);
        showNotification('Address copied!', 'success');
      }
    });

    userMenu.addEventListener('click', function(e) {
      e.stopPropagation();
      const options = this.querySelector('.user-options');
      options.classList.toggle('hidden');
    });

    document.addEventListener('click', function() {
      const options = document.querySelector('.user-options');
      if (options && !options.classList.contains('hidden')) {
        options.classList.add('hidden');
      }
    });
  </script>
</body>
</html>
